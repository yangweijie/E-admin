{"version":3,"sources":["webpack:///./node_modules/simple-uploader.js/src/uploader.js","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/simple-uploader.js/src/chunk.js","webpack:///./src/components/upload.vue","webpack:///./src/components/upload.vue?9f79","webpack:///./node_modules/simple-uploader.js/src/event.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./src/components/upload.vue?a773","webpack:///./node_modules/simple-uploader.js/src/file.js","webpack:///./node_modules/simple-uploader.js/src/utils.js"],"names":["utils","event","File","Chunk","version","isServer","window","ie10plus","navigator","msPointerEnabled","support","sliceName","_support","isDefined","Blob","FileList","bproto","prototype","each","n","Uploader","supportDirectory","input","document","createElement","type","sd","opts","this","defineNonEnumerable","extend","defaults","preventEvent","bind","_preventEvent","call","webAPIFileRead","fileObj","fileType","startByte","endByte","chunk","readFinished","file","chunkSize","forceChunkSize","simultaneousUploads","singleFile","fileParameterName","progressCallbacksInterval","speedSmoothingFactor","query","headers","withCredentials","preprocess","method","testMethod","uploadMethod","prioritizeFirstAndLastChunk","allowDuplicateUploads","target","testChunks","generateUniqueIdentifier","maxChunkRetries","chunkRetryInterval","permanentErrors","successStatuses","onDropStopPropagation","initFileFn","readFileFn","checkChunkUploadedByResponse","initialPaused","processResponse","response","cb","processParams","params","constructor","_trigger","name","args","toArray","arguments","preventDefault","trigger","apply","unshift","_triggerAsync","nextTick","addFiles","files","evt","_files","oldFileListLen","fileList","length","size","fileName","uniqueIdentifier","getFromUniqueIdentifier","_file","push","removeFile","newFileList","slice","addFile","cancel","i","custom","isFunction","relativePath","webkitRelativePath","replace","ret","uploadNextChunk","preventEvents","found","pendingStatus","STATUS","PENDING","checkChunkUploaded","uploader","paused","_firstResponse","isUploading","chunks","status","send","outstanding","isComplete","upload","_shouldUploadNext","started","num","should","uploadingStatus","UPLOADING","assignBrowse","domNodes","isDirectory","attributes","domNode","tagName","setAttribute","style","visibility","position","width","height","appendChild","addEventListener","e","toLowerCase","click","value","key","that","onDrop","stopPropagation","_parseDataTransfer","dataTransfer","items","webkitGetAsEntry","webkitReadDataTransfer","self","queue","readDirectory","reader","readEntries","entries","entry","isFile","fullPath","fileReadSuccess","readError","createReader","decrement","substring","fileError","item","getAsFile","_assignHelper","handles","remove","evtMethod","handler","assignDrop","_onDrop","dragover","dragenter","dragleave","drop","unAssignDrop","module","exports","$","$trim","trim","forcedStringTrimMethod","proto","forced","offset","tested","retries","pendingRetry","preprocessState","readState","loaded","total","computeEndByte","xhr","READING","SUCCESS","ERROR","COMPLETE","PROGRESS","RETRY","_event","_chunkEvent","Math","min","getParams","chunkNumber","currentChunkSize","totalSize","identifier","filename","totalChunks","getTarget","indexOf","join","test","XMLHttpRequest","testHandler","evalOpts","data","prepareXhrRequest","message","preprocessFinished","bytes","read","progressHandler","doneHandler","lengthComputable","msg","processingResponse","err","res","processedState","abort","retryInterval","setTimeout","isTest","readyState","_status","responseText","progress","s","sizeUploaded","paramsMethod","blob","v","k","encodeURIComponent","FormData","append","open","setRequestHeader","class","displayType","index","styleHeight","styleWidth","fit","src","preview-src-list","showImgTool","showImgToolIndex","error","multiple","imgLeft","fileDelete","imgRight","ref","handelBrowse","percentage","progressShow","showUploadBtn","foreverShow","href","fileIcon","lastName","text-inside","stroke-width","drag","title","dialogVisible","append-to-body","destroy-on-close","footer","selection","submit","finder","display","finderHeight","noop","props","modelValue","String","Array","Object","Boolean","default","token","Number","url","upType","accessKey","secretKey","bucket","region","domain","uploadToken","accept","saveDir","isUniqidmd5","onProgress","Function","emits","setup","ctx","state","oss","innerHeight","isArray","instance","val","split","filter","JSON","parse","stringify","parent","provides","elFormItem","formItemMitt","emit","deep","btn","accessKeyId","accessKeySecret","Authorization","uniqidMd5","rand","random","pow","toString","swapArray","arr","index1","index2","splice","checkExt","ext","getExtension","qiniuMultipartUpload","observable","fname","subscribe","next","parseInt","percent","complete","ossMultipartUpload","multipartUpload","then","result","catch","on","rootFile","code","showClose","dangerouslyUseHTMLString","refresh","router","back","duration","render","__scopeId","_eventData","func","listened","fuc","off","fails","whitespaces","non","METHOD_NAME","isRoot","isFolder","id","uid","isString","path","substr","charAt","_parseFile","allError","aborted","completed","averageSpeed","currentSpeed","_lastProgressCallback","Date","now","_prevUploadedSize","_prevProgress","bootstrap","parsePaths","paths","len","ppaths","filePaths","folderFile","_updateParentFileList","p","_eachAccess","eachFn","fileFn","f","_resetError","round","ceil","floor","max","_measureSpeed","smoothingFactor","timeSpan","uploaded","_checkProgress","getRoot","triggerProgress","_error","_updateUploadedChunks","clearTimeout","_progeressId","timeDiff","_chunk","_errorFiles","uploading","resume","pause","retry","fileRetry","reset","c","totalDone","bytesLoaded","getSize","getFormatSize","formatSize","timeRemaining","sizeDelta","calRet","delta","POSITIVE_INFINITY","_removeFile","_delFilePath","newParent","getType","lastIndexOf","oproto","aproto","serialize","fn","ary","isPlainObject","obj","getPrototypeOf","context","stop","start","end","undefined","isObject","isUndefined","a","options","copy","copyIsArray","clone","force","toFixed","defineProperty","enumerable","configurable","writable"],"mappings":"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","file":"static/js/chunk-45a6d778.2200af4d.js","sourcesContent":["var utils = require('./utils')\nvar event = require('./event')\nvar File = require('./file')\nvar Chunk = require('./chunk')\n\nvar version = '__VERSION__'\n\nvar isServer = typeof window === 'undefined'\n\n// ie10+\nvar ie10plus = isServer ? false : window.navigator.msPointerEnabled\nvar support = (function () {\n  if (isServer) {\n    return false\n  }\n  var sliceName = 'slice'\n  var _support = utils.isDefined(window.File) && utils.isDefined(window.Blob) &&\n                utils.isDefined(window.FileList)\n  var bproto = null\n  if (_support) {\n    bproto = window.Blob.prototype\n    utils.each(['slice', 'webkitSlice', 'mozSlice'], function (n) {\n      if (bproto[n]) {\n        sliceName = n\n        return false\n      }\n    })\n    _support = !!bproto[sliceName]\n  }\n  if (_support) Uploader.sliceName = sliceName\n  bproto = null\n  return _support\n})()\n\nvar supportDirectory = (function () {\n  if (isServer) {\n    return false\n  }\n  var input = window.document.createElement('input')\n  input.type = 'file'\n  var sd = 'webkitdirectory' in input || 'directory' in input\n  input = null\n  return sd\n})()\n\nfunction Uploader (opts) {\n  this.support = support\n  /* istanbul ignore if */\n  if (!this.support) {\n    return\n  }\n  this.supportDirectory = supportDirectory\n  utils.defineNonEnumerable(this, 'filePaths', {})\n  this.opts = utils.extend({}, Uploader.defaults, opts || {})\n\n  this.preventEvent = utils.bind(this._preventEvent, this)\n\n  File.call(this, this)\n}\n\n/**\n * Default read function using the webAPI\n *\n * @function webAPIFileRead(fileObj, fileType, startByte, endByte, chunk)\n *\n */\nvar webAPIFileRead = function (fileObj, fileType, startByte, endByte, chunk) {\n  chunk.readFinished(fileObj.file[Uploader.sliceName](startByte, endByte, fileType))\n}\n\nUploader.version = version\n\nUploader.defaults = {\n  chunkSize: 1024 * 1024,\n  forceChunkSize: false,\n  simultaneousUploads: 3,\n  singleFile: false,\n  fileParameterName: 'file',\n  progressCallbacksInterval: 500,\n  speedSmoothingFactor: 0.1,\n  query: {},\n  headers: {},\n  withCredentials: false,\n  preprocess: null,\n  method: 'multipart',\n  testMethod: 'GET',\n  uploadMethod: 'POST',\n  prioritizeFirstAndLastChunk: false,\n  allowDuplicateUploads: false,\n  target: '/',\n  testChunks: true,\n  generateUniqueIdentifier: null,\n  maxChunkRetries: 0,\n  chunkRetryInterval: null,\n  permanentErrors: [404, 415, 500, 501],\n  successStatuses: [200, 201, 202],\n  onDropStopPropagation: false,\n  initFileFn: null,\n  readFileFn: webAPIFileRead,\n  checkChunkUploadedByResponse: null,\n  initialPaused: false,\n  processResponse: function (response, cb) {\n    cb(null, response)\n  },\n  processParams: function (params) {\n    return params\n  }\n}\n\nUploader.utils = utils\nUploader.event = event\nUploader.File = File\nUploader.Chunk = Chunk\n\n// inherit file\nUploader.prototype = utils.extend({}, File.prototype)\n// inherit event\nutils.extend(Uploader.prototype, event)\nutils.extend(Uploader.prototype, {\n\n  constructor: Uploader,\n\n  _trigger: function (name) {\n    var args = utils.toArray(arguments)\n    var preventDefault = !this.trigger.apply(this, arguments)\n    if (name !== 'catchAll') {\n      args.unshift('catchAll')\n      preventDefault = !this.trigger.apply(this, args) || preventDefault\n    }\n    return !preventDefault\n  },\n\n  _triggerAsync: function () {\n    var args = arguments\n    utils.nextTick(function () {\n      this._trigger.apply(this, args)\n    }, this)\n  },\n\n  addFiles: function (files, evt) {\n    var _files = []\n    var oldFileListLen = this.fileList.length\n    utils.each(files, function (file) {\n      // Uploading empty file IE10/IE11 hangs indefinitely\n      // Directories have size `0` and name `.`\n      // Ignore already added files if opts.allowDuplicateUploads is set to false\n      if ((!ie10plus || ie10plus && file.size > 0) && !(file.size % 4096 === 0 && (file.name === '.' || file.fileName === '.'))) {\n        var uniqueIdentifier = this.generateUniqueIdentifier(file)\n        if (this.opts.allowDuplicateUploads || !this.getFromUniqueIdentifier(uniqueIdentifier)) {\n          var _file = new File(this, file, this)\n          _file.uniqueIdentifier = uniqueIdentifier\n          if (this._trigger('fileAdded', _file, evt)) {\n            _files.push(_file)\n          } else {\n            File.prototype.removeFile.call(this, _file)\n          }\n        }\n      }\n    }, this)\n    // get new fileList\n    var newFileList = this.fileList.slice(oldFileListLen)\n    if (this._trigger('filesAdded', _files, newFileList, evt)) {\n      utils.each(_files, function (file) {\n        if (this.opts.singleFile && this.files.length > 0) {\n          this.removeFile(this.files[0])\n        }\n        this.files.push(file)\n      }, this)\n      this._trigger('filesSubmitted', _files, newFileList, evt)\n    } else {\n      utils.each(newFileList, function (file) {\n        File.prototype.removeFile.call(this, file)\n      }, this)\n    }\n  },\n\n  addFile: function (file, evt) {\n    this.addFiles([file], evt)\n  },\n\n  cancel: function () {\n    for (var i = this.fileList.length - 1; i >= 0; i--) {\n      this.fileList[i].cancel()\n    }\n  },\n\n  removeFile: function (file) {\n    File.prototype.removeFile.call(this, file)\n    this._trigger('fileRemoved', file)\n  },\n\n  generateUniqueIdentifier: function (file) {\n    var custom = this.opts.generateUniqueIdentifier\n    if (utils.isFunction(custom)) {\n      return custom(file)\n    }\n    /* istanbul ignore next */\n    // Some confusion in different versions of Firefox\n    var relativePath = file.relativePath || file.webkitRelativePath || file.fileName || file.name\n    /* istanbul ignore next */\n    return file.size + '-' + relativePath.replace(/[^0-9a-zA-Z_-]/img, '')\n  },\n\n  getFromUniqueIdentifier: function (uniqueIdentifier) {\n    var ret = false\n    utils.each(this.files, function (file) {\n      if (file.uniqueIdentifier === uniqueIdentifier) {\n        ret = file\n        return false\n      }\n    })\n    return ret\n  },\n\n  uploadNextChunk: function (preventEvents) {\n    var found = false\n    var pendingStatus = Chunk.STATUS.PENDING\n    var checkChunkUploaded = this.uploader.opts.checkChunkUploadedByResponse\n    if (this.opts.prioritizeFirstAndLastChunk) {\n      utils.each(this.files, function (file) {\n        if (file.paused) {\n          return\n        }\n        if (checkChunkUploaded && !file._firstResponse && file.isUploading()) {\n          // waiting for current file's first chunk response\n          return\n        }\n        if (file.chunks.length && file.chunks[0].status() === pendingStatus) {\n          file.chunks[0].send()\n          found = true\n          return false\n        }\n        if (file.chunks.length > 1 && file.chunks[file.chunks.length - 1].status() === pendingStatus) {\n          file.chunks[file.chunks.length - 1].send()\n          found = true\n          return false\n        }\n      })\n      if (found) {\n        return found\n      }\n    }\n\n    // Now, simply look for the next, best thing to upload\n    utils.each(this.files, function (file) {\n      if (!file.paused) {\n        if (checkChunkUploaded && !file._firstResponse && file.isUploading()) {\n          // waiting for current file's first chunk response\n          return\n        }\n        utils.each(file.chunks, function (chunk) {\n          if (chunk.status() === pendingStatus) {\n            chunk.send()\n            found = true\n            return false\n          }\n        })\n      }\n      if (found) {\n        return false\n      }\n    })\n    if (found) {\n      return true\n    }\n\n    // The are no more outstanding chunks to upload, check is everything is done\n    var outstanding = false\n    utils.each(this.files, function (file) {\n      if (!file.isComplete()) {\n        outstanding = true\n        return false\n      }\n    })\n    // should check files now\n    // if now files in list\n    // should not trigger complete event\n    if (!outstanding && !preventEvents && this.files.length) {\n      // All chunks have been uploaded, complete\n      this._triggerAsync('complete')\n    }\n    return outstanding\n  },\n\n  upload: function (preventEvents) {\n    // Make sure we don't start too many uploads at once\n    var ret = this._shouldUploadNext()\n    if (ret === false) {\n      return\n    }\n    !preventEvents && this._trigger('uploadStart')\n    var started = false\n    for (var num = 1; num <= this.opts.simultaneousUploads - ret; num++) {\n      started = this.uploadNextChunk(!preventEvents) || started\n      if (!started && preventEvents) {\n        // completed\n        break\n      }\n    }\n    if (!started && !preventEvents) {\n      this._triggerAsync('complete')\n    }\n  },\n\n  /**\n   * should upload next chunk\n   * @function\n   * @returns {Boolean|Number}\n   */\n  _shouldUploadNext: function () {\n    var num = 0\n    var should = true\n    var simultaneousUploads = this.opts.simultaneousUploads\n    var uploadingStatus = Chunk.STATUS.UPLOADING\n    utils.each(this.files, function (file) {\n      utils.each(file.chunks, function (chunk) {\n        if (chunk.status() === uploadingStatus) {\n          num++\n          if (num >= simultaneousUploads) {\n            should = false\n            return false\n          }\n        }\n      })\n      return should\n    })\n    // if should is true then return uploading chunks's length\n    return should && num\n  },\n\n  /**\n   * Assign a browse action to one or more DOM nodes.\n   * @function\n   * @param {Element|Array.<Element>} domNodes\n   * @param {boolean} isDirectory Pass in true to allow directories to\n   * @param {boolean} singleFile prevent multi file upload\n   * @param {Object} attributes set custom attributes:\n   *  http://www.w3.org/TR/html-markup/input.file.html#input.file-attributes\n   *  eg: accept: 'image/*'\n   * be selected (Chrome only).\n   */\n  assignBrowse: function (domNodes, isDirectory, singleFile, attributes) {\n    if (typeof domNodes.length === 'undefined') {\n      domNodes = [domNodes]\n    }\n\n    utils.each(domNodes, function (domNode) {\n      var input\n      if (domNode.tagName === 'INPUT' && domNode.type === 'file') {\n        input = domNode\n      } else {\n        input = document.createElement('input')\n        input.setAttribute('type', 'file')\n        // display:none - not working in opera 12\n        utils.extend(input.style, {\n          visibility: 'hidden',\n          position: 'absolute',\n          width: '1px',\n          height: '1px'\n        })\n        // for opera 12 browser, input must be assigned to a document\n        domNode.appendChild(input)\n        // https://developer.mozilla.org/en/using_files_from_web_applications)\n        // event listener is executed two times\n        // first one - original mouse click event\n        // second - input.click(), input is inside domNode\n        domNode.addEventListener('click', function (e) {\n          if (domNode.tagName.toLowerCase() === 'label') {\n            return\n          }\n          input.click()\n        }, false)\n      }\n      if (!this.opts.singleFile && !singleFile) {\n        input.setAttribute('multiple', 'multiple')\n      }\n      if (isDirectory) {\n        input.setAttribute('webkitdirectory', 'webkitdirectory')\n      }\n      attributes && utils.each(attributes, function (value, key) {\n        input.setAttribute(key, value)\n      })\n      // When new files are added, simply append them to the overall list\n      var that = this\n      input.addEventListener('change', function (e) {\n        that._trigger(e.type, e)\n        if (e.target.value) {\n          that.addFiles(e.target.files, e)\n          e.target.value = ''\n        }\n      }, false)\n    }, this)\n  },\n\n  onDrop: function (evt) {\n    this._trigger(evt.type, evt)\n    if (this.opts.onDropStopPropagation) {\n      evt.stopPropagation()\n    }\n    evt.preventDefault()\n    this._parseDataTransfer(evt.dataTransfer, evt)\n  },\n\n  _parseDataTransfer: function (dataTransfer, evt) {\n    if (dataTransfer.items && dataTransfer.items[0] &&\n      dataTransfer.items[0].webkitGetAsEntry) {\n      this.webkitReadDataTransfer(dataTransfer, evt)\n    } else {\n      this.addFiles(dataTransfer.files, evt)\n    }\n  },\n\n  webkitReadDataTransfer: function (dataTransfer, evt) {\n    var self = this\n    var queue = dataTransfer.items.length\n    var files = []\n    utils.each(dataTransfer.items, function (item) {\n      var entry = item.webkitGetAsEntry()\n      if (!entry) {\n        decrement()\n        return\n      }\n      if (entry.isFile) {\n        // due to a bug in Chrome's File System API impl - #149735\n        fileReadSuccess(item.getAsFile(), entry.fullPath)\n      } else {\n        readDirectory(entry.createReader())\n      }\n    })\n    function readDirectory (reader) {\n      reader.readEntries(function (entries) {\n        if (entries.length) {\n          queue += entries.length\n          utils.each(entries, function (entry) {\n            if (entry.isFile) {\n              var fullPath = entry.fullPath\n              entry.file(function (file) {\n                fileReadSuccess(file, fullPath)\n              }, readError)\n            } else if (entry.isDirectory) {\n              readDirectory(entry.createReader())\n            }\n          })\n          readDirectory(reader)\n        } else {\n          decrement()\n        }\n      }, readError)\n    }\n    function fileReadSuccess (file, fullPath) {\n      // relative path should not start with \"/\"\n      file.relativePath = fullPath.substring(1)\n      files.push(file)\n      decrement()\n    }\n    function readError (fileError) {\n      throw fileError\n    }\n    function decrement () {\n      if (--queue === 0) {\n        self.addFiles(files, evt)\n      }\n    }\n  },\n\n  _assignHelper: function (domNodes, handles, remove) {\n    if (typeof domNodes.length === 'undefined') {\n      domNodes = [domNodes]\n    }\n    var evtMethod = remove ? 'removeEventListener' : 'addEventListener'\n    utils.each(domNodes, function (domNode) {\n      utils.each(handles, function (handler, name) {\n        domNode[evtMethod](name, handler, false)\n      }, this)\n    }, this)\n  },\n\n  _preventEvent: function (e) {\n    utils.preventEvent(e)\n    this._trigger(e.type, e)\n  },\n\n  /**\n   * Assign one or more DOM nodes as a drop target.\n   * @function\n   * @param {Element|Array.<Element>} domNodes\n   */\n  assignDrop: function (domNodes) {\n    this._onDrop = utils.bind(this.onDrop, this)\n    this._assignHelper(domNodes, {\n      dragover: this.preventEvent,\n      dragenter: this.preventEvent,\n      dragleave: this.preventEvent,\n      drop: this._onDrop\n    })\n  },\n\n  /**\n   * Un-assign drop event from DOM nodes\n   * @function\n   * @param domNodes\n   */\n  unAssignDrop: function (domNodes) {\n    this._assignHelper(domNodes, {\n      dragover: this.preventEvent,\n      dragenter: this.preventEvent,\n      dragleave: this.preventEvent,\n      drop: this._onDrop\n    }, true)\n    this._onDrop = null\n  }\n})\n\nmodule.exports = Uploader\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","var utils = require('./utils')\n\nfunction Chunk (uploader, file, offset) {\n  utils.defineNonEnumerable(this, 'uploader', uploader)\n  utils.defineNonEnumerable(this, 'file', file)\n  utils.defineNonEnumerable(this, 'bytes', null)\n  this.offset = offset\n  this.tested = false\n  this.retries = 0\n  this.pendingRetry = false\n  this.preprocessState = 0\n  this.readState = 0\n  this.loaded = 0\n  this.total = 0\n  this.chunkSize = this.uploader.opts.chunkSize\n  this.startByte = this.offset * this.chunkSize\n  this.endByte = this.computeEndByte()\n  this.xhr = null\n}\n\nvar STATUS = Chunk.STATUS = {\n  PENDING: 'pending',\n  UPLOADING: 'uploading',\n  READING: 'reading',\n  SUCCESS: 'success',\n  ERROR: 'error',\n  COMPLETE: 'complete',\n  PROGRESS: 'progress',\n  RETRY: 'retry'\n}\n\nutils.extend(Chunk.prototype, {\n\n  _event: function (evt, args) {\n    args = utils.toArray(arguments)\n    args.unshift(this)\n    this.file._chunkEvent.apply(this.file, args)\n  },\n\n  computeEndByte: function () {\n    var endByte = Math.min(this.file.size, (this.offset + 1) * this.chunkSize)\n    if (this.file.size - endByte < this.chunkSize && !this.uploader.opts.forceChunkSize) {\n      // The last chunk will be bigger than the chunk size,\n      // but less than 2 * this.chunkSize\n      endByte = this.file.size\n    }\n    return endByte\n  },\n\n  getParams: function () {\n    return {\n      chunkNumber: this.offset + 1,\n      chunkSize: this.uploader.opts.chunkSize,\n      currentChunkSize: this.endByte - this.startByte,\n      totalSize: this.file.size,\n      identifier: this.file.uniqueIdentifier,\n      filename: this.file.name,\n      relativePath: this.file.relativePath,\n      totalChunks: this.file.chunks.length\n    }\n  },\n\n  getTarget: function (target, params) {\n    if (!params.length) {\n      return target\n    }\n    if (target.indexOf('?') < 0) {\n      target += '?'\n    } else {\n      target += '&'\n    }\n    return target + params.join('&')\n  },\n\n  test: function () {\n    this.xhr = new XMLHttpRequest()\n    this.xhr.addEventListener('load', testHandler, false)\n    this.xhr.addEventListener('error', testHandler, false)\n    var testMethod = utils.evalOpts(this.uploader.opts.testMethod, this.file, this)\n    var data = this.prepareXhrRequest(testMethod, true)\n    this.xhr.send(data)\n\n    var $ = this\n    function testHandler (event) {\n      var status = $.status(true)\n      if (status === STATUS.ERROR) {\n        $._event(status, $.message())\n        $.uploader.uploadNextChunk()\n      } else if (status === STATUS.SUCCESS) {\n        $._event(status, $.message())\n        $.tested = true\n      } else if (!$.file.paused) {\n        // Error might be caused by file pause method\n        // Chunks does not exist on the server side\n        $.tested = true\n        $.send()\n      }\n    }\n  },\n\n  preprocessFinished: function () {\n    // Compute the endByte after the preprocess function to allow an\n    // implementer of preprocess to set the fileObj size\n    this.endByte = this.computeEndByte()\n    this.preprocessState = 2\n    this.send()\n  },\n\n  readFinished: function (bytes) {\n    this.readState = 2\n    this.bytes = bytes\n    this.send()\n  },\n\n  send: function () {\n    var preprocess = this.uploader.opts.preprocess\n    var read = this.uploader.opts.readFileFn\n    if (utils.isFunction(preprocess)) {\n      switch (this.preprocessState) {\n        case 0:\n          this.preprocessState = 1\n          preprocess(this)\n          return\n        case 1:\n          return\n      }\n    }\n    switch (this.readState) {\n      case 0:\n        this.readState = 1\n        read(this.file, this.file.fileType, this.startByte, this.endByte, this)\n        return\n      case 1:\n        return\n    }\n    if (this.uploader.opts.testChunks && !this.tested) {\n      this.test()\n      return\n    }\n\n    this.loaded = 0\n    this.total = 0\n    this.pendingRetry = false\n\n    // Set up request and listen for event\n    this.xhr = new XMLHttpRequest()\n    this.xhr.upload.addEventListener('progress', progressHandler, false)\n    this.xhr.addEventListener('load', doneHandler, false)\n    this.xhr.addEventListener('error', doneHandler, false)\n\n    var uploadMethod = utils.evalOpts(this.uploader.opts.uploadMethod, this.file, this)\n    var data = this.prepareXhrRequest(uploadMethod, false, this.uploader.opts.method, this.bytes)\n    this.xhr.send(data)\n\n    var $ = this\n    function progressHandler (event) {\n      if (event.lengthComputable) {\n        $.loaded = event.loaded\n        $.total = event.total\n      }\n      $._event(STATUS.PROGRESS, event)\n    }\n\n    function doneHandler (event) {\n      var msg = $.message()\n      $.processingResponse = true\n      $.uploader.opts.processResponse(msg, function (err, res) {\n        $.processingResponse = false\n        if (!$.xhr) {\n          return\n        }\n        $.processedState = {\n          err: err,\n          res: res\n        }\n        var status = $.status()\n        if (status === STATUS.SUCCESS || status === STATUS.ERROR) {\n          // delete this.data\n          $._event(status, res)\n          status === STATUS.ERROR && $.uploader.uploadNextChunk()\n        } else {\n          $._event(STATUS.RETRY, res)\n          $.pendingRetry = true\n          $.abort()\n          $.retries++\n          var retryInterval = $.uploader.opts.chunkRetryInterval\n          if (retryInterval !== null) {\n            setTimeout(function () {\n              $.send()\n            }, retryInterval)\n          } else {\n            $.send()\n          }\n        }\n      }, $.file, $)\n    }\n  },\n\n  abort: function () {\n    var xhr = this.xhr\n    this.xhr = null\n    this.processingResponse = false\n    this.processedState = null\n    if (xhr) {\n      xhr.abort()\n    }\n  },\n\n  status: function (isTest) {\n    if (this.readState === 1) {\n      return STATUS.READING\n    } else if (this.pendingRetry || this.preprocessState === 1) {\n      // if pending retry then that's effectively the same as actively uploading,\n      // there might just be a slight delay before the retry starts\n      return STATUS.UPLOADING\n    } else if (!this.xhr) {\n      return STATUS.PENDING\n    } else if (this.xhr.readyState < 4 || this.processingResponse) {\n      // Status is really 'OPENED', 'HEADERS_RECEIVED'\n      // or 'LOADING' - meaning that stuff is happening\n      return STATUS.UPLOADING\n    } else {\n      var _status\n      if (this.uploader.opts.successStatuses.indexOf(this.xhr.status) > -1) {\n        // HTTP 200, perfect\n        // HTTP 202 Accepted - The request has been accepted for processing, but the processing has not been completed.\n        _status = STATUS.SUCCESS\n      } else if (this.uploader.opts.permanentErrors.indexOf(this.xhr.status) > -1 ||\n          !isTest && this.retries >= this.uploader.opts.maxChunkRetries) {\n        // HTTP 415/500/501, permanent error\n        _status = STATUS.ERROR\n      } else {\n        // this should never happen, but we'll reset and queue a retry\n        // a likely case for this would be 503 service unavailable\n        this.abort()\n        _status = STATUS.PENDING\n      }\n      var processedState = this.processedState\n      if (processedState && processedState.err) {\n        _status = STATUS.ERROR\n      }\n      return _status\n    }\n  },\n\n  message: function () {\n    return this.xhr ? this.xhr.responseText : ''\n  },\n\n  progress: function () {\n    if (this.pendingRetry) {\n      return 0\n    }\n    var s = this.status()\n    if (s === STATUS.SUCCESS || s === STATUS.ERROR) {\n      return 1\n    } else if (s === STATUS.PENDING) {\n      return 0\n    } else {\n      return this.total > 0 ? this.loaded / this.total : 0\n    }\n  },\n\n  sizeUploaded: function () {\n    var size = this.endByte - this.startByte\n    // can't return only chunk.loaded value, because it is bigger than chunk size\n    if (this.status() !== STATUS.SUCCESS) {\n      size = this.progress() * size\n    }\n    return size\n  },\n\n  prepareXhrRequest: function (method, isTest, paramsMethod, blob) {\n    // Add data from the query options\n    var query = utils.evalOpts(this.uploader.opts.query, this.file, this, isTest)\n    query = utils.extend(this.getParams(), query)\n\n    // processParams\n    query = this.uploader.opts.processParams(query, this.file, this, isTest)\n\n    var target = utils.evalOpts(this.uploader.opts.target, this.file, this, isTest)\n    var data = null\n    if (method === 'GET' || paramsMethod === 'octet') {\n      // Add data from the query options\n      var params = []\n      utils.each(query, function (v, k) {\n        params.push([encodeURIComponent(k), encodeURIComponent(v)].join('='))\n      })\n      target = this.getTarget(target, params)\n      data = blob || null\n    } else {\n      // Add data from the query options\n      data = new FormData()\n      utils.each(query, function (v, k) {\n        data.append(k, v)\n      })\n      if (typeof blob !== 'undefined') {\n        data.append(this.uploader.opts.fileParameterName, blob, this.file.name)\n      }\n    }\n\n    this.xhr.open(method, target, true)\n    this.xhr.withCredentials = this.uploader.opts.withCredentials\n\n    // Add data from header options\n    utils.each(utils.evalOpts(this.uploader.opts.headers, this.file, this, isTest), function (v, k) {\n      this.xhr.setRequestHeader(k, v)\n    }, this)\n\n    return data\n  }\n\n})\n\nmodule.exports = Chunk\n","<template>\r\n    <span v-if=\"displayType=='image'\">\r\n      <div v-for=\"(file,index) in files\" :key=\"index\" class=\"imgContainer\" :style=\"{height: styleHeight,width:styleWidth}\">\r\n        <el-image\r\n                class=\"image\"\r\n                fit=\"contain\"\r\n                :src=\"file\"\r\n                :preview-src-list=\"files\"\r\n                :style=\"{height: styleHeight,width:styleWidth}\"\r\n                @mouseover=\"showImgTool(index)\"\r\n                @mouseout=\"showImgToolIndex = -1\"\r\n        >\r\n          <template #error>\r\n            <div\r\n                    class=\"imageslot\"\r\n                    :style=\"{width:styleWidth,height: styleHeight,backgroundColor:'#f5f7fa'}\"\r\n                    @mouseover=\"showImgTool(index)\"\r\n                    @mouseout=\"showImgToolIndex = -1\"\r\n            >\r\n            <span></span>\r\n          </div>\r\n          </template>\r\n\r\n        </el-image>\r\n        <span v-show=\"showImgToolIndex == index\" class=\"el-upload-list__item-actions\" @mouseout=\"showImgToolIndex = -1\" @mouseover=\"showImgTool(index)\">\r\n          <span v-if=\"multiple\" @click=\"imgLeft(index)\"><i class=\"el-icon-caret-left\" /></span>\r\n          <span @click=\"fileDelete(index)\"><i class=\"el-icon-delete\" /></span>\r\n          <span v-if=\"multiple\" @click=\"imgRight(index)\"><i class=\"el-icon-caret-right\" /></span>\r\n        </span>\r\n      </div>\r\n    </span>\r\n    <span v-if=\"displayType=='image'\" v-show=\"showUploadBtn\" ref=\"btn\"  @click=\"handelBrowse\">\r\n      <slot>\r\n        <label class=\"uploader-btn\" :style=\"{height: styleHeight,width:styleHeight}\">\r\n          <el-progress v-show=\"progressShow\" class=\"progess\" type=\"circle\" :width=\"height\" :percentage=\"percentage\" />\r\n          <i v-show=\"!progressShow\" class=\"el-icon-plus progess\" />\r\n        </label>\r\n      </slot>\r\n    </span>\r\n    <span v-if=\"displayType=='file'\" class=\"fileList\">\r\n      <div v-for=\"(file,index) in files\" :key=\"index\" style=\"margin-bottom: 10px;\" v-if=\"!foreverShow\">\r\n        <div class=\"el-upload-list__item is-success\" :style=\"{width:styleWidth}\" @mouseover=\"showImgTool(index)\" @mouseout=\"showImgToolIndex = -1\">\r\n          <a class=\"el-upload-list__item-name\" target=\"_blank\" :href=\"file\">\r\n            <div v-if=\"showImgToolIndex == index\">\r\n              <span style=\"display: flex;align-items: center;\">\r\n                <i v-show=\"showImgToolIndex == index\" class=\"el-icon-download\" />\r\n                <el-image v-show=\"showImgToolIndex != index\" :src=\"fileIcon(file)\" style=\"width: 32px;height: 32px;\">\r\n                  <template #error>\r\n                  <div style=\"display: flex; align-items: center; top: 3px; position: absolute; left: 10px;\"> <i class=\"el-icon-document\" /></div>\r\n                  </template>\r\n                </el-image>\r\n                &nbsp;&nbsp;{{ lastName(file) }}\r\n              </span>\r\n            </div>\r\n            <div v-else>\r\n              <span style=\"display: flex;align-items: center;top: 3px;position: absolute;left:5px\">\r\n                <i v-show=\"showImgToolIndex == index\" class=\"el-icon-download\" />\r\n                <el-image v-show=\"showImgToolIndex != index\" :src=\"fileIcon(file)\" style=\"width: 32px;height: 32px;\">\r\n                  <template #error>\r\n                     <div style=\"display: flex; align-items: center; top: 3px; position: absolute; left: 10px;\"> <i class=\"el-icon-document\" /></div>\r\n                  </template>\r\n                </el-image>\r\n                &nbsp;&nbsp;{{ lastName(file) }}\r\n              </span>\r\n            </div>\r\n\r\n          </a>\r\n          <label class=\"el-upload-list__item-status-label\"><i class=\"el-icon-upload-success el-icon-check\" style=\"color: #ffffff\" /></label>\r\n          <i class=\"el-icon-close\" @click=\"fileDelete(index)\" /><i class=\"el-icon-close-tip\" />\r\n        </div>\r\n      </div>\r\n      <span @click=\"handelBrowse\" v-if=\"displayType == 'file'\" v-show=\"showUploadBtn || foreverShow\" ref=\"btn\" >\r\n        <slot>\r\n          <el-progress v-show=\"progressShow\" style=\"margin: 13px 0px\" :text-inside=\"true\" :stroke-width=\"15\" :percentage=\"percentage\" />\r\n          <label class=\"fileButton\" >\r\n          <template v-if=\"drag\">\r\n            <i class=\"el-icon-upload\" />\r\n            <div class=\"el-upload__text\"><em></em></div>\r\n          </template>\r\n          <template v-else>\r\n            <i class=\"el-icon-upload\" /> \r\n          </template>\r\n          </label>\r\n        </slot>\r\n      </span>\r\n    </span>\r\n    <el-dialog title=\"\" v-model=\"dialogVisible\" :append-to-body=\"true\" width=\"70%\" destroy-on-close>\r\n      <keep-alive>\r\n        <render :data=\"finder\" :multiple=\"multiple\" display=\"menu\" :height=\"finderHeight\" v-model:selection=\"selection\"></render>\r\n      </keep-alive>\r\n      <template #footer>\r\n        <div :class=\"multiple && selection.length > 0 ? 'footer':''\">\r\n          <div v-if=\"multiple && selection.length > 0\">: {{selection.length}}</div>\r\n          <div>\r\n            <el-button type=\"primary\" @click=\"submit\"></el-button>\r\n            <el-button @click=\"dialogVisible = false\"></el-button>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n</template>\r\n<script>\r\nimport Uploader from 'simple-uploader.js'\r\nimport OSS from 'ali-oss'\r\nimport md5 from 'js-md5'\r\nimport * as qiniu from 'qiniu-js'\r\nimport {fileIcon, lastName, link, refresh} from '@/utils'\r\nimport {defineComponent, reactive, watch, nextTick, toRefs, ref,getCurrentInstance} from \"vue\";\r\nimport {ElMessage, ElNotification} from 'element-plus'\r\nimport {action} from \"@/store\";\r\nimport router from \"@/router\";\r\nfunction noop() {}\r\nexport default defineComponent({\r\n  name: 'EadminUpload',\r\n  props: {\r\n    modelValue: [String, Array],\r\n    finder: {\r\n      type: [Object, Boolean],\r\n      default: false\r\n    },\r\n    token: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    width: {\r\n      type: [String, Number],\r\n      default: 'auto'\r\n    },\r\n    height: {\r\n      type: [String, Number],\r\n      default: 'auto'\r\n    },\r\n    url: {\r\n      type: String,\r\n      default: '/'\r\n    },\r\n    upType: {\r\n      type: String,\r\n      default: 'local'\r\n    },\r\n    accessKey: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    secretKey: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    bucket: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    region: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    domain: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    uploadToken: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    accept: {\r\n      type: String,\r\n      default: '*'\r\n    },\r\n    saveDir: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    multiple: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    displayType: {\r\n      type: String,\r\n      default: 'file'\r\n    },\r\n    isUniqidmd5: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    foreverShow:Boolean,\r\n    onProgress: {\r\n      type: Function,\r\n      default: noop\r\n    },\r\n    drag: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    chunk: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n  },\r\n  emits: ['success','update:modelValue'],\r\n  setup(props,ctx){\r\n    const state = reactive({\r\n      styleWidth: '',\r\n      styleHeight: '',\r\n      selection:props.modelValue,\r\n      files: [],\r\n      dialogVisible: false,\r\n      // \r\n      progressShow: false,\r\n      // \r\n      percentage: 0,\r\n      // index,\r\n      showImgToolIndex: -1,\r\n      // \r\n      showUploadBtn: true,\r\n      oss: null,\r\n      finderHeight:(window.innerHeight / 2) + 'px'\r\n    })\r\n    if(!Array.isArray(state.selection)){\r\n      state.selection = [state.selection]\r\n    }\r\n    const instance = getCurrentInstance()\r\n    watch(()=>props.modelValue,val=>{\r\n      if (typeof val === 'string') {\r\n        state.files = val.split(',')\r\n        state.files = state.files.filter(function(s) {\r\n          return s && s.trim()\r\n        })\r\n      } else if (typeof val === 'object' && val instanceof Array) {\r\n        state.files = val\r\n      }\r\n    })\r\n    watch(()=>state.files,val=>{\r\n      if (!props.multiple && val.length === 1) {\r\n        state.showUploadBtn = false\r\n      } else if (val.length === 0) {\r\n        state.showUploadBtn = true\r\n      }\r\n      state.selection = JSON.parse(JSON.stringify(val))\r\n      if(instance.parent && instance.parent.type.name === 'ElFormItem'){\r\n        instance.parent.provides.elFormItem.formItemMitt?.emit('el.form.change', [val.join(',')])\r\n      }\r\n      ctx.emit('update:modelValue', val.join(','))\r\n    },{deep:true})\r\n    if (props.width != 'auto') {\r\n      state.styleWidth = props.width + 'px'\r\n    } else {\r\n      state.styleWidth = '100%'\r\n    }\r\n    const btn = ref('')\r\n\r\n    if (props.height != 'auto') {\r\n      state.styleHeight = props.height + 'px'\r\n    } else {\r\n      state.styleHeight = '100%'\r\n    }\r\n\r\n    if (typeof props.modelValue === 'string') {\r\n      state.files = props.modelValue.split(',')\r\n      state.files = state.files.filter(function(s) {\r\n        return s && s.trim()\r\n      })\r\n    } else if (typeof props.modelValue === 'object' && props.modelValue instanceof Array) {\r\n      state.files = props.modelValue\r\n    }\r\n    let oss = null\r\n    if (props.upType == 'oss') {\r\n      oss = new OSS({\r\n        accessKeyId: props.accessKey,\r\n        accessKeySecret: props.secretKey,\r\n        bucket: props.bucket,\r\n        region: props.region\r\n      })\r\n    }\r\n    const uploader = new Uploader({\r\n      target: props.url,\r\n      query: {\r\n        saveDir: props.saveDir,\r\n        isUniqidmd5: props.isUniqidmd5,\r\n        upType: props.upType\r\n      },\r\n      testChunks: props.chunk,\r\n      chunkSize: props.chunk ? 1 * 1024 * 1024 : 500 * 1024 * 1024,\r\n      headers: {\r\n        Authorization: props.token\r\n      }\r\n    })\r\n    watch(()=>props.saveDir,value=>{\r\n      uploader.opts.query.saveDir = value\r\n    })\r\n    nextTick(() => {\r\n      if(!props.finder){\r\n        uploader.assignDrop(btn.value)\r\n        uploader.assignBrowse(btn.value, false, !props.multiple, {\r\n          accept: props.accept\r\n        })\r\n      }\r\n    })\r\n    uploader.on('fileAdded', function(file, event) {\r\n      if (checkExt(file)) {\r\n        if (props.upType == 'oss') {\r\n          ossMultipartUpload(file)\r\n        } else if (props.upType == 'qiniu') {\r\n          qiniuMultipartUpload(file)\r\n        }\r\n      } else {\r\n        uploader.cancel()\r\n        ElMessage({\r\n          type: 'error',\r\n          message: ''\r\n        })\r\n        return false\r\n      }\r\n    })\r\n    // \r\n    uploader.on('uploadStart', function() {\r\n\r\n    })\r\n    // \r\n    uploader.on('filesSubmitted', function(files, fileList) {\r\n      if (props.upType != 'oss' && props.upType != 'qiniu') {\r\n        uploader.upload()\r\n      }\r\n      if (files.length > 0) {\r\n        state.progressShow = true\r\n      }\r\n    })\r\n    // \r\n    uploader.on('fileSuccess', function(rootFile, file, message) {\r\n\r\n      try {\r\n        const res = JSON.parse(message)\r\n        if (res.code == 200) {\r\n          uploader.removeFile(file)\r\n          state.progressShow = false\r\n          if (!props.multiple) {\r\n            state.files = []\r\n          }\r\n          ctx.emit('success')\r\n          state.files.push(res.data)\r\n        }else if (res.code == 80020) {\r\n          ElMessage({\r\n            showClose: true,\r\n            dangerouslyUseHTMLString: true,\r\n            message: res.message,\r\n            type: res.type\r\n          })\r\n          if (res.url) {\r\n            if (res.url == 'back') {\r\n              if (res.refresh) {\r\n                action.refresh(true)\r\n              }\r\n              router.back()\r\n            } else {\r\n              link(res.url)\r\n              return\r\n            }\r\n          }\r\n          if (res.refresh) {\r\n            refresh()\r\n          }\r\n          if (res.type == 'success') {\r\n            res.code = 200\r\n            return res\r\n          }\r\n        } else if (res.code == 80021) {\r\n          ElNotification({\r\n            showClose: true,\r\n            dangerouslyUseHTMLString: true,\r\n            title: res.title,\r\n            message: res.message,\r\n            type: res.type,\r\n            duration: 1500\r\n          })\r\n          if (res.url) {\r\n            if (res.url == 'back') {\r\n              if (res.refresh) {\r\n                action.refresh(true)\r\n              }\r\n              router.back()\r\n              return\r\n            } else {\r\n              link(res.url)\r\n              return\r\n            }\r\n          }\r\n          if (res.refresh) {\r\n            refresh()\r\n          }\r\n          if (res.type == 'success') {\r\n            res.code = 200\r\n            return res\r\n          }\r\n        }\r\n      } catch (e) {\r\n        uploader.removeFile(file)\r\n        state.progressShow = false\r\n        ElMessage({\r\n          type: 'error',\r\n          message: ':'\r\n        })\r\n      }\r\n    })\r\n    uploader.on('fileProgress', function(rootFile, file, chunk) {\r\n      state.progressShow = true\r\n      state.percentage = parseInt(uploader.progress() * 100)\r\n      props.onProgress(state.percentage)\r\n    })\r\n    // \r\n    uploader.on('fileComplete', function(rootFile) {\r\n      // console.log(rootFile)\r\n    })\r\n    // \r\n    uploader.on('fileError', function(rootFile, file, message) {\r\n      uploader.removeFile(file)\r\n      state.progressShow = false\r\n      try {\r\n        const res = JSON.parse(message)\r\n        ElMessage({\r\n          type: 'error',\r\n          message: res.message\r\n        })\r\n      } catch (e) {\r\n        ElMessage({\r\n          type: 'error',\r\n          message: ':'\r\n        })\r\n      }\r\n    })\r\n\r\n\r\n    function uniqidMd5() {\r\n      const rand = ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4)\r\n      return md5(rand)\r\n    }\r\n    // \r\n    function showImgTool(index) {\r\n      state.showImgToolIndex = index\r\n    }\r\n    // \r\n    function imgLeft(index) {\r\n      if (index > 0) {\r\n        swapArray(state.files, index - 1, index)\r\n      }\r\n    }\r\n    // \r\n    function imgRight(index) {\r\n      if (index < state.files.length - 1) {\r\n        swapArray(state.files, index, index + 1)\r\n      }\r\n    }\r\n    function swapArray(arr, index1, index2) {\r\n      arr[index1] = arr.splice(index2, 1, arr[index1])[0]\r\n      return arr\r\n    }\r\n    // \r\n    function fileDelete(key) {\r\n      state.files.splice(key, 1)\r\n    }\r\n    // \r\n    function checkExt(file) {\r\n      if (props.accept == '*') {\r\n        return true\r\n      } else if (props.displayType == 'image' && file.fileType.indexOf('image') != -1) {\r\n        return true\r\n      } else {\r\n        const ext = props.accept.split(',')\r\n        if (ext.indexOf('.' + file.getExtension()) == -1) {\r\n          return false\r\n        } else {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    // \r\n    async function qiniuMultipartUpload(file) {\r\n      let filename = ''\r\n      if (props.isUniqidmd5) {\r\n        filename = props.saveDir + uniqidMd5() + '.' + file.getExtension()\r\n      } else {\r\n        filename = props.saveDir + file.name\r\n      }\r\n      state.progressShow = true\r\n      var observable = qiniu.upload(file.file, filename, props.uploadToken, {\r\n        fname: filename,\r\n        params: {}\r\n      })\r\n      await observable.subscribe({\r\n        next(res) {\r\n          state.progressShow = true\r\n          state.percentage = parseInt(res.total.percent)\r\n          props.onProgress(state.percentage)\r\n        },\r\n        error(err) {\r\n          state.progressShow = false\r\n          ElMessage({\r\n            type: 'error',\r\n            message: err.message\r\n          })\r\n        },\r\n        complete(res) {\r\n          uploader.removeFile(file)\r\n          state.progressShow = false\r\n          const url = `${props.domain}/${filename}`\r\n          if (!props.multiple) {\r\n            state.files = []\r\n          }\r\n          state.files.push(url)\r\n          ctx.emit('success')\r\n        }\r\n      })\r\n    }\r\n    // \r\n    async function ossMultipartUpload(file) {\r\n      let filename = ''\r\n      if (props.isUniqidmd5) {\r\n        filename = props.saveDir + uniqidMd5() + '.' + file.getExtension()\r\n      } else {\r\n        filename = props.saveDir + file.name\r\n      }\r\n      state.progressShow = true\r\n      // object-namefile.txtabc/test/file.txtBucketBucket\r\n      await oss.multipartUpload(filename, file.file, {\r\n        progress: function(percentage) {\r\n          state.progressShow = true\r\n          state.percentage = parseInt(percentage * 100)\r\n          props.onProgress(state.percentage)\r\n        }\r\n      }).then(result => {\r\n        // \r\n        uploader.removeFile(file)\r\n        state.progressShow = false\r\n        const url = `${props.domain}/${filename}`\r\n        if (!props.multiple) {\r\n          state.files = []\r\n        }\r\n        state.files.push(url)\r\n        ctx.emit('success')\r\n      }).catch(err => {\r\n        state.progressShow = false\r\n        ElMessage({\r\n          type: 'error',\r\n          message: err\r\n        })\r\n      })\r\n    }\r\n    function handelBrowse() {\r\n      if(props.finder){\r\n        state.dialogVisible = true\r\n      }\r\n      state.percentage = 0\r\n    }\r\n    function submit() {\r\n      state.dialogVisible = false\r\n      state.files = state.selection\r\n\r\n    }\r\n    return {\r\n      btn,\r\n      submit,\r\n      lastName,\r\n      fileIcon,\r\n      handelBrowse,\r\n      fileDelete,\r\n      imgRight,\r\n      imgLeft,\r\n      showImgTool,\r\n      ...toRefs(state)\r\n    }\r\n  },\r\n\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  .vue-cropper-content {\r\n    width: 100%;\r\n    height: 500px;\r\n    padding-bottom: 20px;\r\n    text-align: center;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n  .fileButton {\r\n    background: #fff;\r\n    border: 1px solid #dcdfe6;\r\n    color: #606266;\r\n    display: inline-block;\r\n    white-space: nowrap;\r\n    cursor: pointer;\r\n    -webkit-appearance: none;\r\n    text-align: center;\r\n    box-sizing: border-box;\r\n    outline: none;\r\n    margin: 0;\r\n    transition: .1s;\r\n    font-weight: 500;\r\n    -moz-user-select: none;\r\n    -webkit-user-select: none;\r\n    -ms-user-select: none;\r\n    padding: 0px 20px;\r\n    font-size: 14px;\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .el-upload-list__item-status-label i {\r\n    font-size: 12px;\r\n    margin-top: 12px;\r\n    position: absolute;\r\n    top: 0;\r\n    right: 17px;\r\n    transform: rotate(-45deg);\r\n  }\r\n  .el-upload-list__item {\r\n    display:flex;justify-content:space-between;\r\n    overflow: hidden;\r\n    z-index: 0;\r\n    background-color: #fff;\r\n    border: 1px solid #c0ccda;\r\n    border-radius: 6px;\r\n    box-sizing: border-box;\r\n    padding: 7px 10px 0px 10px;\r\n    height: 40px;\r\n    margin-top: 0px;\r\n    margin-bottom: 10px;\r\n  }\r\n  .el-upload-list__item-status-label {\r\n    position: absolute;\r\n    right: -17px;\r\n    top: -7px;\r\n    width: 46px;\r\n    height: 26px;\r\n    background: #13ce66;\r\n    transform: rotate(45deg);\r\n    box-shadow: 0 1px 1px #ccc;\r\n  }\r\n  .imageslot{\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #d3dce6;\r\n    position: relative;\r\n    border-radius: 5px;\r\n    text-align: center;\r\n  }\r\n  .imageslot i{\r\n    font-size: 30px;\r\n    position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);\r\n  }\r\n  .imageslot span{\r\n    font-size: 12px;\r\n    width: 100%;\r\n    text-align: center;\r\n    position: absolute; left: 50%; transform: translate(-50%,0);\r\n  }\r\n  .img_delete{\r\n    position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);\r\n  }\r\n  .el-upload-list__item-actions {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 35px;\r\n    cursor: pointer;\r\n    left: 0;\r\n    top: 0;\r\n    text-align: center;\r\n    color: #fff;\r\n    font-size: 20px;\r\n    background-color: rgba(0,0,0,.5);\r\n    border-radius: 5%;\r\n    transition: opacity .3s;\r\n  }\r\n  .imgContainer{\r\n    margin-right: 10px;\r\n    position: relative;;\r\n    display: inline-block;\r\n  }\r\n  .image{\r\n    border-radius: 5%;\r\n  }\r\n  .progess{\r\n    position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);\r\n  }\r\n  .uploader-btn {\r\n    background-color: #fbfdff;\r\n    border: 1px dashed #c0ccda;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n    cursor: pointer;\r\n    vertical-align: top;\r\n    display: inline-block;\r\n    text-align: center;\r\n    position: relative;\r\n  }\r\n  .uploader-btn  i {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n  }\r\n  .uploader-btn:hover {\r\n    border: 1px dashed #2d8cf0;\r\n  }\r\n  .footer{\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n</style>\r\n","import { render } from \"./upload.vue?vue&type=template&id=072892e8&scoped=true\"\nimport script from \"./upload.vue?vue&type=script&lang=js\"\nexport * from \"./upload.vue?vue&type=script&lang=js\"\n\nimport \"./upload.vue?vue&type=style&index=0&id=072892e8&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-072892e8\"\n\nexport default script","var each = require('./utils').each\n\nvar event = {\n\n  _eventData: null,\n\n  on: function (name, func) {\n    if (!this._eventData) this._eventData = {}\n    if (!this._eventData[name]) this._eventData[name] = []\n    var listened = false\n    each(this._eventData[name], function (fuc) {\n      if (fuc === func) {\n        listened = true\n        return false\n      }\n    })\n    if (!listened) {\n      this._eventData[name].push(func)\n    }\n  },\n\n  off: function (name, func) {\n    if (!this._eventData) this._eventData = {}\n    if (!this._eventData[name] || !this._eventData[name].length) return\n    if (func) {\n      each(this._eventData[name], function (fuc, i) {\n        if (fuc === func) {\n          this._eventData[name].splice(i, 1)\n          return false\n        }\n      }, this)\n    } else {\n      this._eventData[name] = []\n    }\n  },\n\n  trigger: function (name) {\n    if (!this._eventData) this._eventData = {}\n    if (!this._eventData[name]) return true\n    var args = this._eventData[name].slice.call(arguments, 1)\n    var preventDefault = false\n    each(this._eventData[name], function (fuc) {\n      preventDefault = fuc.apply(this, args) === false || preventDefault\n    }, this)\n    return !preventDefault\n  }\n}\n\nmodule.exports = event\n","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./upload.vue?vue&type=style&index=0&id=072892e8&scoped=true&lang=css\"","var utils = require('./utils')\nvar Chunk = require('./chunk')\n\nfunction File (uploader, file, parent) {\n  utils.defineNonEnumerable(this, 'uploader', uploader)\n  this.isRoot = this.isFolder = uploader === this\n  utils.defineNonEnumerable(this, 'parent', parent || null)\n  utils.defineNonEnumerable(this, 'files', [])\n  utils.defineNonEnumerable(this, 'fileList', [])\n  utils.defineNonEnumerable(this, 'chunks', [])\n  utils.defineNonEnumerable(this, '_errorFiles', [])\n  utils.defineNonEnumerable(this, 'file', null)\n  this.id = utils.uid()\n\n  if (this.isRoot || !file) {\n    this.file = null\n  } else {\n    if (utils.isString(file)) {\n      // folder\n      this.isFolder = true\n      this.file = null\n      this.path = file\n      if (this.parent.path) {\n        file = file.substr(this.parent.path.length)\n      }\n      this.name = file.charAt(file.length - 1) === '/' ? file.substr(0, file.length - 1) : file\n    } else {\n      this.file = file\n      this.fileType = this.file.type\n      this.name = file.fileName || file.name\n      this.size = file.size\n      this.relativePath = file.relativePath || file.webkitRelativePath || this.name\n      this._parseFile()\n    }\n  }\n\n  this.paused = uploader.opts.initialPaused\n  this.error = false\n  this.allError = false\n  this.aborted = false\n  this.completed = false\n  this.averageSpeed = 0\n  this.currentSpeed = 0\n  this._lastProgressCallback = Date.now()\n  this._prevUploadedSize = 0\n  this._prevProgress = 0\n\n  this.bootstrap()\n}\n\nutils.extend(File.prototype, {\n\n  _parseFile: function () {\n    var ppaths = parsePaths(this.relativePath)\n    if (ppaths.length) {\n      var filePaths = this.uploader.filePaths\n      utils.each(ppaths, function (path, i) {\n        var folderFile = filePaths[path]\n        if (!folderFile) {\n          folderFile = new File(this.uploader, path, this.parent)\n          filePaths[path] = folderFile\n          this._updateParentFileList(folderFile)\n        }\n        this.parent = folderFile\n        folderFile.files.push(this)\n        if (!ppaths[i + 1]) {\n          folderFile.fileList.push(this)\n        }\n      }, this)\n    } else {\n      this._updateParentFileList()\n    }\n  },\n\n  _updateParentFileList: function (file) {\n    if (!file) {\n      file = this\n    }\n    var p = this.parent\n    if (p) {\n      p.fileList.push(file)\n    }\n  },\n\n  _eachAccess: function (eachFn, fileFn) {\n    if (this.isFolder) {\n      utils.each(this.files, function (f, i) {\n        return eachFn.call(this, f, i)\n      }, this)\n      return\n    }\n    fileFn.call(this, this)\n  },\n\n  bootstrap: function () {\n    if (this.isFolder) return\n    var opts = this.uploader.opts\n    if (utils.isFunction(opts.initFileFn)) {\n      opts.initFileFn.call(this, this)\n    }\n\n    this.abort(true)\n    this._resetError()\n    // Rebuild stack of chunks from file\n    this._prevProgress = 0\n    var round = opts.forceChunkSize ? Math.ceil : Math.floor\n    var chunks = Math.max(round(this.size / opts.chunkSize), 1)\n    for (var offset = 0; offset < chunks; offset++) {\n      this.chunks.push(new Chunk(this.uploader, this, offset))\n    }\n  },\n\n  _measureSpeed: function () {\n    var smoothingFactor = this.uploader.opts.speedSmoothingFactor\n    var timeSpan = Date.now() - this._lastProgressCallback\n    if (!timeSpan) {\n      return\n    }\n    var uploaded = this.sizeUploaded()\n    // Prevent negative upload speed after file upload resume\n    this.currentSpeed = Math.max((uploaded - this._prevUploadedSize) / timeSpan * 1000, 0)\n    this.averageSpeed = smoothingFactor * this.currentSpeed + (1 - smoothingFactor) * this.averageSpeed\n    this._prevUploadedSize = uploaded\n    if (this.parent && this.parent._checkProgress()) {\n      this.parent._measureSpeed()\n    }\n  },\n\n  _checkProgress: function (file) {\n    return Date.now() - this._lastProgressCallback >= this.uploader.opts.progressCallbacksInterval\n  },\n\n  _chunkEvent: function (chunk, evt, message) {\n    var uploader = this.uploader\n    var STATUS = Chunk.STATUS\n    var that = this\n    var rootFile = this.getRoot()\n    var triggerProgress = function () {\n      that._measureSpeed()\n      uploader._trigger('fileProgress', rootFile, that, chunk)\n      that._lastProgressCallback = Date.now()\n    }\n    switch (evt) {\n      case STATUS.PROGRESS:\n        if (this._checkProgress()) {\n          triggerProgress()\n        }\n        break\n      case STATUS.ERROR:\n        this._error()\n        this.abort(true)\n        uploader._trigger('fileError', rootFile, this, message, chunk)\n        break\n      case STATUS.SUCCESS:\n        this._updateUploadedChunks(message, chunk)\n        if (this.error) {\n          return\n        }\n        clearTimeout(this._progeressId)\n        this._progeressId = 0\n        var timeDiff = Date.now() - this._lastProgressCallback\n        if (timeDiff < uploader.opts.progressCallbacksInterval) {\n          this._progeressId = setTimeout(triggerProgress, uploader.opts.progressCallbacksInterval - timeDiff)\n        }\n        if (this.isComplete()) {\n          clearTimeout(this._progeressId)\n          triggerProgress()\n          this.currentSpeed = 0\n          this.averageSpeed = 0\n          uploader._trigger('fileSuccess', rootFile, this, message, chunk)\n          if (rootFile.isComplete()) {\n            uploader._trigger('fileComplete', rootFile, this)\n          }\n        } else if (!this._progeressId) {\n          triggerProgress()\n        }\n        break\n      case STATUS.RETRY:\n        uploader._trigger('fileRetry', rootFile, this, chunk)\n        break\n    }\n  },\n\n  _updateUploadedChunks: function (message, chunk) {\n    var checkChunkUploaded = this.uploader.opts.checkChunkUploadedByResponse\n    if (checkChunkUploaded) {\n      var xhr = chunk.xhr\n      utils.each(this.chunks, function (_chunk) {\n        if (!_chunk.tested) {\n          var uploaded = checkChunkUploaded.call(this, _chunk, message)\n          if (_chunk === chunk && !uploaded) {\n            // fix the first chunk xhr status\n            // treated as success but checkChunkUploaded is false\n            // so the current chunk should be uploaded again\n            _chunk.xhr = null\n          }\n          if (uploaded) {\n            // first success and other chunks are uploaded\n            // then set xhr, so the uploaded chunks\n            // will be treated as success too\n            _chunk.xhr = xhr\n          }\n          _chunk.tested = true\n        }\n      }, this)\n      if (!this._firstResponse) {\n        this._firstResponse = true\n        this.uploader.upload(true)\n      } else {\n        this.uploader.uploadNextChunk()\n      }\n    } else {\n      this.uploader.uploadNextChunk()\n    }\n  },\n\n  _error: function () {\n    this.error = this.allError = true\n    var parent = this.parent\n    while (parent && parent !== this.uploader) {\n      parent._errorFiles.push(this)\n      parent.error = true\n      if (parent._errorFiles.length === parent.files.length) {\n        parent.allError = true\n      }\n      parent = parent.parent\n    }\n  },\n\n  _resetError: function () {\n    this.error = this.allError = false\n    var parent = this.parent\n    var index = -1\n    while (parent && parent !== this.uploader) {\n      index = parent._errorFiles.indexOf(this)\n      parent._errorFiles.splice(index, 1)\n      parent.allError = false\n      if (!parent._errorFiles.length) {\n        parent.error = false\n      }\n      parent = parent.parent\n    }\n  },\n\n  isComplete: function () {\n    if (!this.completed) {\n      var outstanding = false\n      this._eachAccess(function (file) {\n        if (!file.isComplete()) {\n          outstanding = true\n          return false\n        }\n      }, function () {\n        if (this.error) {\n          outstanding = true\n        } else {\n          var STATUS = Chunk.STATUS\n          utils.each(this.chunks, function (chunk) {\n            var status = chunk.status()\n            if (status === STATUS.ERROR || status === STATUS.PENDING || status === STATUS.UPLOADING || status === STATUS.READING || chunk.preprocessState === 1 || chunk.readState === 1) {\n              outstanding = true\n              return false\n            }\n          })\n        }\n      })\n      this.completed = !outstanding\n    }\n    return this.completed\n  },\n\n  isUploading: function () {\n    var uploading = false\n    this._eachAccess(function (file) {\n      if (file.isUploading()) {\n        uploading = true\n        return false\n      }\n    }, function () {\n      var uploadingStatus = Chunk.STATUS.UPLOADING\n      utils.each(this.chunks, function (chunk) {\n        if (chunk.status() === uploadingStatus) {\n          uploading = true\n          return false\n        }\n      })\n    })\n    return uploading\n  },\n\n  resume: function () {\n    this._eachAccess(function (f) {\n      f.resume()\n    }, function () {\n      this.paused = false\n      this.aborted = false\n      this.uploader.upload()\n    })\n    this.paused = false\n    this.aborted = false\n  },\n\n  pause: function () {\n    this._eachAccess(function (f) {\n      f.pause()\n    }, function () {\n      this.paused = true\n      this.abort()\n    })\n    this.paused = true\n  },\n\n  cancel: function () {\n    this.uploader.removeFile(this)\n  },\n\n  retry: function (file) {\n    var fileRetry = function (file) {\n      if (file.error) {\n        file.bootstrap()\n      }\n    }\n    if (file) {\n      file.bootstrap()\n    } else {\n      this._eachAccess(fileRetry, function () {\n        this.bootstrap()\n      })\n    }\n    this.uploader.upload()\n  },\n\n  abort: function (reset) {\n    if (this.aborted) {\n      return\n    }\n    this.currentSpeed = 0\n    this.averageSpeed = 0\n    this.aborted = !reset\n    var chunks = this.chunks\n    if (reset) {\n      this.chunks = []\n    }\n    var uploadingStatus = Chunk.STATUS.UPLOADING\n    utils.each(chunks, function (c) {\n      if (c.status() === uploadingStatus) {\n        c.abort()\n        this.uploader.uploadNextChunk()\n      }\n    }, this)\n  },\n\n  progress: function () {\n    var totalDone = 0\n    var totalSize = 0\n    var ret = 0\n    this._eachAccess(function (file, index) {\n      totalDone += file.progress() * file.size\n      totalSize += file.size\n      if (index === this.files.length - 1) {\n        ret = totalSize > 0 ? totalDone / totalSize : this.isComplete() ? 1 : 0\n      }\n    }, function () {\n      if (this.error) {\n        ret = 1\n        return\n      }\n      if (this.chunks.length === 1) {\n        this._prevProgress = Math.max(this._prevProgress, this.chunks[0].progress())\n        ret = this._prevProgress\n        return\n      }\n      // Sum up progress across everything\n      var bytesLoaded = 0\n      utils.each(this.chunks, function (c) {\n        // get chunk progress relative to entire file\n        bytesLoaded += c.progress() * (c.endByte - c.startByte)\n      })\n      var percent = bytesLoaded / this.size\n      // We don't want to lose percentages when an upload is paused\n      this._prevProgress = Math.max(this._prevProgress, percent > 0.9999 ? 1 : percent)\n      ret = this._prevProgress\n    })\n    return ret\n  },\n\n  getSize: function () {\n    var size = 0\n    this._eachAccess(function (file) {\n      size += file.size\n    }, function () {\n      size += this.size\n    })\n    return size\n  },\n\n  getFormatSize: function () {\n    var size = this.getSize()\n    return utils.formatSize(size)\n  },\n\n  getRoot: function () {\n    if (this.isRoot) {\n      return this\n    }\n    var parent = this.parent\n    while (parent) {\n      if (parent.parent === this.uploader) {\n        // find it\n        return parent\n      }\n      parent = parent.parent\n    }\n    return this\n  },\n\n  sizeUploaded: function () {\n    var size = 0\n    this._eachAccess(function (file) {\n      size += file.sizeUploaded()\n    }, function () {\n      utils.each(this.chunks, function (chunk) {\n        size += chunk.sizeUploaded()\n      })\n    })\n    return size\n  },\n\n  timeRemaining: function () {\n    var ret = 0\n    var sizeDelta = 0\n    var averageSpeed = 0\n    this._eachAccess(function (file, i) {\n      if (!file.paused && !file.error) {\n        sizeDelta += file.size - file.sizeUploaded()\n        averageSpeed += file.averageSpeed\n      }\n      if (i === this.files.length - 1) {\n        ret = calRet(sizeDelta, averageSpeed)\n      }\n    }, function () {\n      if (this.paused || this.error) {\n        ret = 0\n        return\n      }\n      var delta = this.size - this.sizeUploaded()\n      ret = calRet(delta, this.averageSpeed)\n    })\n    return ret\n    function calRet (delta, averageSpeed) {\n      if (delta && !averageSpeed) {\n        return Number.POSITIVE_INFINITY\n      }\n      if (!delta && !averageSpeed) {\n        return 0\n      }\n      return Math.floor(delta / averageSpeed)\n    }\n  },\n\n  removeFile: function (file) {\n    if (file.isFolder) {\n      while (file.files.length) {\n        var f = file.files[file.files.length - 1]\n        this._removeFile(f)\n      }\n    }\n    this._removeFile(file)\n  },\n\n  _delFilePath: function (file) {\n    if (file.path && this.filePaths) {\n      delete this.filePaths[file.path]\n    }\n    utils.each(file.fileList, function (file) {\n      this._delFilePath(file)\n    }, this)\n  },\n\n  _removeFile: function (file) {\n    if (!file.isFolder) {\n      utils.each(this.files, function (f, i) {\n        if (f === file) {\n          this.files.splice(i, 1)\n          return false\n        }\n      }, this)\n      file.abort()\n      var parent = file.parent\n      var newParent\n      while (parent && parent !== this) {\n        newParent = parent.parent\n        parent._removeFile(file)\n        parent = newParent\n      }\n    }\n    file.parent === this && utils.each(this.fileList, function (f, i) {\n      if (f === file) {\n        this.fileList.splice(i, 1)\n        return false\n      }\n    }, this)\n    if (!this.isRoot && this.isFolder && !this.files.length) {\n      this.parent._removeFile(this)\n      this.uploader._delFilePath(this)\n    }\n    file.parent = null\n  },\n\n  getType: function () {\n    if (this.isFolder) {\n      return 'folder'\n    }\n    return this.file.type && this.file.type.split('/')[1]\n  },\n\n  getExtension: function () {\n    if (this.isFolder) {\n      return ''\n    }\n    return this.name.substr((~-this.name.lastIndexOf('.') >>> 0) + 2).toLowerCase()\n  }\n\n})\n\nmodule.exports = File\n\nfunction parsePaths (path) {\n  var ret = []\n  var paths = path.split('/')\n  var len = paths.length\n  var i = 1\n  paths.splice(len - 1, 1)\n  len--\n  if (paths.length) {\n    while (i <= len) {\n      ret.push(paths.slice(0, i++).join('/') + '/')\n    }\n  }\n  return ret\n}\n","var oproto = Object.prototype\nvar aproto = Array.prototype\nvar serialize = oproto.toString\n\nvar isFunction = function (fn) {\n  return serialize.call(fn) === '[object Function]'\n}\n\nvar isArray = Array.isArray || /* istanbul ignore next */ function (ary) {\n  return serialize.call(ary) === '[object Array]'\n}\n\nvar isPlainObject = function (obj) {\n  return serialize.call(obj) === '[object Object]' && Object.getPrototypeOf(obj) === oproto\n}\n\nvar i = 0\nvar utils = {\n  uid: function () {\n    return ++i\n  },\n  noop: function () {},\n  bind: function (fn, context) {\n    return function () {\n      return fn.apply(context, arguments)\n    }\n  },\n  preventEvent: function (evt) {\n    evt.preventDefault()\n  },\n  stop: function (evt) {\n    evt.preventDefault()\n    evt.stopPropagation()\n  },\n  nextTick: function (fn, context) {\n    setTimeout(utils.bind(fn, context), 0)\n  },\n  toArray: function (ary, start, end) {\n    if (start === undefined) start = 0\n    if (end === undefined) end = ary.length\n    return aproto.slice.call(ary, start, end)\n  },\n\n  isPlainObject: isPlainObject,\n  isFunction: isFunction,\n  isArray: isArray,\n  isObject: function (obj) {\n    return Object(obj) === obj\n  },\n  isString: function (s) {\n    return typeof s === 'string'\n  },\n  isUndefined: function (a) {\n    return typeof a === 'undefined'\n  },\n  isDefined: function (a) {\n    return typeof a !== 'undefined'\n  },\n\n  each: function (ary, func, context) {\n    if (utils.isDefined(ary.length)) {\n      for (var i = 0, len = ary.length; i < len; i++) {\n        if (func.call(context, ary[i], i, ary) === false) {\n          break\n        }\n      }\n    } else {\n      for (var k in ary) {\n        if (func.call(context, ary[k], k, ary) === false) {\n          break\n        }\n      }\n    }\n  },\n\n  /**\n   * If option is a function, evaluate it with given params\n   * @param {*} data\n   * @param {...} args arguments of a callback\n   * @returns {*}\n   */\n  evalOpts: function (data, args) {\n    if (utils.isFunction(data)) {\n      // `arguments` is an object, not array, in FF, so:\n      args = utils.toArray(arguments)\n      data = data.apply(null, args.slice(1))\n    }\n    return data\n  },\n\n  extend: function () {\n    var options\n    var name\n    var src\n    var copy\n    var copyIsArray\n    var clone\n    var target = arguments[0] || {}\n    var i = 1\n    var length = arguments.length\n    var force = false\n\n    // ,\n    if (typeof target === 'boolean') {\n      force = target\n      target = arguments[1] || {}\n      i++\n    }\n\n    // \n    if (typeof target !== 'object' && !isFunction(target)) {\n      target = {}\n    }\n\n    //  extend \n    if (i === length) {\n      target = this\n      i--\n    }\n\n    for (; i < length; i++) {\n      // \n      if ((options = arguments[i]) != null) {\n        for (name in options) {\n          src = target[name]\n          copy = options[name]\n\n          // \n          if (target === copy) {\n            continue\n          }\n          if (force && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n            if (copyIsArray) {\n              copyIsArray = false\n              clone = src && isArray(src) ? src : []\n            } else {\n              clone = src && isPlainObject(src) ? src : {}\n            }\n            target[name] = utils.extend(force, clone, copy)\n          } else if (copy !== undefined) {\n            target[name] = copy\n          }\n        }\n      }\n    }\n    return target\n  },\n\n  formatSize: function (size) {\n    if (size < 1024) {\n      return size.toFixed(0) + ' bytes'\n    } else if (size < 1024 * 1024) {\n      return (size / 1024.0).toFixed(0) + ' KB'\n    } else if (size < 1024 * 1024 * 1024) {\n      return (size / 1024.0 / 1024.0).toFixed(1) + ' MB'\n    } else {\n      return (size / 1024.0 / 1024.0 / 1024.0).toFixed(1) + ' GB'\n    }\n  },\n\n  defineNonEnumerable: function (target, key, value) {\n    Object.defineProperty(target, key, {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: value\n    })\n  }\n}\n\nmodule.exports = utils\n"],"sourceRoot":""}